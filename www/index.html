<!DOCTYPE html>

<head>
	<html>

	<!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *"> -->
	<meta name="format-detection" content="telephone=no">
	<meta name="msapplication-tap-highlight" content="no">
	<meta name="viewport"
				content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width,  height=device-height">


	<!-- CSS -->
	<!-- <link rel="stylesheet" type="text/css" href="css/index.css"> -->
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" href="css/app.css">

	<title>Fietsenvoor LIVE</title>
	</head>
<body class="navSwipeBlocked">
<div class="splashScreen">
	<img src="img/splashLogo.png" class="splashLogo">
	<div class="credits">
		<img src="img/logo_hamaka_wit.png">App door Hamaka
	</div>
</div>
<!-- MENUKNOPPEN -->
<div class="appHeader">
	<div class="row">

		<div id="moneyHeader">
			<!--<img src="img/logo.png" class="logo">-->
			<div class="moneyDesc">Tussenstand</div>
			<div class="moneyCount">&euro; <span class="value">0,00</span></div>
		</div>

	</div>

	<div class="row menu clear">
		<div class="menu-button active" id="button-hup" data-screenid="1"></div>
		<div class="menu-button" id="button-scores" data-screenid="2"></div>
		<div class="menu-button" id="button-nieuws" data-screenid="3"></div>
	</div>
</div>

<div class="mainContent clear">
	<div class="screenWrapper">
		<div class="row screen active" id="hup" data-screenid="1">
			<div class="container">
				<div class="hupOverview"></div>
				<div class="sendHupWrapper">

					<div class="inner">
						<div class="sendHupTrigger">
							Hup!
						</div>
						<div class="closeHupFormTrigger">
							<div class="icon iconClose iconSmall iconInvert"></div>
						</div>
						<div class="container">
							<div class="hupFormWrapper">
								<form>
									<input id="name" type="text" placeholder="Jouw naam">
									<select id="participant">
										<option disabled value="">Deelnemer</option>
									</select>
									<div class="textareaHolder">
										<textarea id="hupMessage" placeholder="Jouw aanmoediging..."></textarea>
									</div>
									<input type="submit" class="submitHup" value="verzenden">
								</form>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

		<div class="row screen" id="scores" data-screenid="2">
			<div class="container">

				<div class="deelnemerOverzichtWrapper">
					<div class="filterInput">
						<input id="filterDeelnemers" data-target=".deelnemerOverzicht .naam" placeholder="Zoek een deelnemer"/>
						<div class="exitFilterModus icon iconClose hidden"></div>
					</div>
					<div class="legend">
						<div class="legendItem">
							<div class="icon iconGoal iconSmall"></div>
							= Doelstelling aantal toppen
						</div>
						<div class="legendItem">
							<div class="icon iconCoin iconSmall"></div>
							= Opgehaald bedrag
						</div>
					</div>
					<div class="container">
						<div class="noItemsFound">Geen deelnemers gevonden</div>
						<div class="deelnemerOverzicht"></div>
					</div>
				</div>
			</div>
		</div>

		<div class="row screen" id="nieuws" data-screenid="3">
			<div class="container content">Nieuws laden...</div>
		</div>

	</div>
	<!-- Cordova --->
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/index.js"></script>

	<!-- jQuery -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"></script>

	<!-- jFeed -->
	<script type="text/javascript" src="js/jquery.jfeed.pack.js"></script>

	<!-- add json2html; both the core library and the jquery wrapper -->
	<script type="text/javascript" src="js/json2html.js"></script>
	<script type="text/javascript" src="js/jquery.json2html.js"></script>

	<!-- Pusher.com -->
	<script src="https://js.pusher.com/3.0/pusher.min.js"></script>

	<!--TouchSwipe-->
	<script type="text/javascript" src="js/jquery.touchSwipe.min.js"></script>

	<!-- App-Specifiek -->
	<script type="text/javascript" src="js/app.js"></script>

	<!-- DOCUMENT READY -->
	<script type="text/javascript" charset="utf-8">

		$(document).ready(function ()
		{

		 //Verbinding maken met onze server (via Pusher.com)
			var pusher = new Pusher('d11fb45626c063f59deb', {
				encrypted: true
			});

			var channel = pusher.subscribe('test_channel');

			loadNews();
  		loadHups();
			loadParticipants();

			/*
			 pusher.connection.bind('connected', function() {

			 //We hebben een verbinding! Sla de SocketID van onze verbinding op
			 var socketID = pusher.connection.socket_id;
			 localStorage.setItem('SocketID', socketID);

			 //Poke de server om ons de laatste updates te sturen
			 pokeServer();
			 });
			 */

			//Luisteren naar updates vanaf de Server
			channel.bind('my_event', function (data)
			{

				//Data is altijd in de vorm van een JSON
				data = JSON.parse(data);

				//alert(data.Type);

				if (data.Type === 'updateHups')
				{
					loadHups();
				}

				if (data.Type === 'updateParticipants')
				{
					loadParticipants();
				}

				if (data.Type === 'updateNews')
				{
					loadNews();
				}
			});

			document.addEventListener("resume", onResume, false);
			//document.addEventListener("pause", onPause, false);

		});

	</script>

</body>
</html>
